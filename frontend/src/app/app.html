<!-- Le gestionnaire de notifications (invisible mais n√©cessaire) -->
<p-toast></p-toast>

<div class="main-container">

    <!-- En-t√™te -->
    <header>
        <div class="logo">üìê NEUCLID</div>
        <div class="subtitle">AI Scientific Drafting</div>
    </header>

    <div class="content-grid">

        <!-- COLONNE GAUCHE : COMMANDE -->
        <p-card header="Votre Demande" styleClass="prompt-card">
            <div class="input-group">
                <textarea rows="5" cols="30" pInputTextarea [(ngModel)]="prompt" [autoResize]="true"
                    placeholder="Ex: Dessine un triangle rectangle ABC..." class="full-width-textarea">
        </textarea>

                <p-button label="G√©n√©rer la Figure" icon="pi pi-bolt" [loading]="isLoading()"
                    (onClick)="generateFigure()" [disabled]="!prompt">
                </p-button>
            </div>
        </p-card>

        <!-- COLONNE DROITE : R√âSULTAT -->
        <p-card header="R√©sultat" styleClass="result-card">

            <!-- Cas 1 : Chargement (SKELETON) -->
            @if (isLoading()) {
            <div class="loading-state">
                <p-skeleton width="100%" height="400px" borderRadius="12px"></p-skeleton>
                <div style="margin-top: 10px; display: flex; justify-content: center">
                    <p-skeleton width="40%" height="20px"></p-skeleton>
                </div>
            </div>
            }

            <!-- Cas 2 : Image Re√ßue (IMAGE VIEWER) -->
            @else if (imageUrl()) {
            <div class="image-display">
                <p-image [src]="imageUrl() || ''" alt="Geometry" [preview]="true" width="100%">
                </p-image>
            </div>
            }

            <!-- Cas 3 : Vide (Placeholder) -->
            @else {
            <div class="empty-state">
                <i class="pi pi-image" style="font-size: 4rem; color: var(--surface-400)"></i>
                <p>La figure appara√Ætra ici</p>
            </div>
            }
        </p-card>

    </div>
</div>